<app-message *ngIf="errorMessage" [message]="errorMessage"></app-message>
<div *ngIf="!errorMessage && !changingPassword" id="profile-info" class="center">
  <h2 class="center">
    Profile of {{ user.firstName }} {{ user.lastName }}
  </h2>
  <table *ngIf="user">
    <tr>
      <td>Username:</td>
      <td>{{ user.username }}</td>
    </tr>
    <tr>
      <td>Email:</td>
      <td *ngIf="!editProfile">{{ user.email }}</td>
      <td class="edit-profile-td" *ngIf="editProfile">
        <input class="edit-input" [(ngModel)]="userCopy.email">
      </td>
    </tr>
    <tr>
      <td>Firstname:</td>
      <td *ngIf="!editProfile">{{ user.firstName }}</td>
      <td class="edit-profile-td" *ngIf="editProfile">
        <input class="edit-input" [(ngModel)]="userCopy.firstName">
      </td>
    </tr>
    <tr>
      <td>Lastname:</td>
      <td *ngIf="!editProfile">{{ user.lastName }}</td>
      <td class="edit-profile-td" *ngIf="editProfile">
        <input class="edit-input" [(ngModel)]="userCopy.lastName">
      </td>
    </tr>
    <tr>
      <td>Phone:</td>
      <td *ngIf="!editProfile">{{ user.credentials.phone }}</td>
      <td class="edit-profile-td" *ngIf="editProfile">
        <input class="edit-input" [(ngModel)]="userCopy.credentials.phone">
      </td>
    </tr>
    <tr>
      <td>Country:</td>
      <td *ngIf="!editProfile">{{ user.credentials.country }}</td>
      <td class="edit-profile-td" *ngIf="editProfile">
        <input class="edit-input" [(ngModel)]="userCopy.credentials.country">
      </td>
    </tr>
    <tr>
      <td>State:</td>
      <td *ngIf="!editProfile">{{ user.credentials.state }}</td>
      <td class="edit-profile-td" *ngIf="editProfile">
        <input class="edit-input" [(ngModel)]="userCopy.credentials.state">
      </td>
    </tr>
    <tr>
      <td>City:</td>
      <td *ngIf="!editProfile">{{ user.credentials.city }}</td>
      <td class="edit-profile-td" *ngIf="editProfile">
        <input class="edit-input" [(ngModel)]="userCopy.credentials.city">
      </td>
    </tr>
    <tr>
      <td>Street:</td>
      <td *ngIf="!editProfile">{{ user.credentials.street }}</td>
      <td class="edit-profile-td" *ngIf="editProfile">
        <input class="edit-input" [(ngModel)]="userCopy.credentials.street">
      </td>
    </tr>
  </table>
  <div *ngIf="inputErrorMessage">{{ inputErrorMessage }}</div>
  <div *ngIf="isOwnProfile">
    <button *ngIf="!editProfile" (click)="edit()">Edit profile</button>
    <button *ngIf="!editProfile" (click)="onChangePasswordClicked()">Change password</button>
    <button *ngIf="editProfile" (click)="saveProfile()">Save</button>
    <button *ngIf="editProfile" (click)="edit()">Back</button>
  </div>
</div>
<div *ngIf="!errorMessage && changingPassword"  class="center">
  <h2 class="center">
    Password change
  </h2>
  <table>
    <tr>
      <td class="change-password">
        <input class="edit-input" placeholder="Old password" [(ngModel)]="passwordChangeData.oldPassword">
      </td>
    </tr>
    <tr>
      <td class="change-password">
        <input class="edit-input" placeholder="New password" [(ngModel)]="passwordChangeData.newPassword">
      </td>
    </tr>
    <tr>
      <td class="change-password">
        <input class="edit-input" placeholder="Confirm new password" [(ngModel)]="passwordChangeData.confirmationPassword">
      </td>
    </tr>
  </table>
  <button (click)="changePassword()">Save</button>
  <button (click)="changingPassword = false">Back</button>
  <p *ngIf="passwordChangeMessage">{{ passwordChangeMessage }}</p>
</div>
